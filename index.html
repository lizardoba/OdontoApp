<!-- üëâ Copia TODO este contenido y guarda como index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OdontoApp ‚Äî DentiStudio</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="header-logo">
        <span class="header-icon">ü¶∑</span>
        <h1>OdontoApp</h1>
        <p>DentiStudio | Ayacucho</p>
      </div>
      <nav class="app-tabs">
        <button class="tab-btn active" data-tab="gestor">Gestor de Pacientes</button>
        <button class="tab-btn" data-tab="moyers">Moyers & T&J</button>
        <button class="tab-btn" data-tab="discrepancia">Discrepancia + Bolton</button>
        <button class="tab-btn" data-tab="catalogo">Cat√°logo de Servicios</button>
      </nav>
    </header>

    <main class="app-content">
      <!-- ‚úÖ Secci√≥n 1: Gestor de Pacientes -->
      <section id="gestor" class="tab-content active">
        <div class="container">
          <div class="header">
            <div class="header-content">
              <h1>üè• Gestor de Pacientes ‚Äî DentiStudio</h1>
              <p>Sistema profesional de gesti√≥n con sincronizaci√≥n GitHub</p>
            </div>
            <div class="github-sync">
              <button id="btnSync" class="btn-sync">üîÑ Sincronizar GitHub</button>
              <span id="statusSync" class="status-sync"></span>
            </div>
          </div>

          <section class="github-config" id="githubConfig" style="display: none;">
            <h3>Configuraci√≥n de GitHub</h3>
            <div class="form-group">
              <label>Token Personal de GitHub (PAT):</label>
              <input type="password" id="githubToken" placeholder="ghp_..." />
            </div>
            <div class="form-group">
              <label>Usuario GitHub:</label>
              <input type="text" id="githubUser" placeholder="tu-usuario" />
            </div>
            <div class="form-group">
              <label>Nombre del Repositorio:</label>
              <input type="text" id="githubRepo" value="odontoapp-dentistudio" />
            </div>
            <div class="btn-group">
              <button onclick="guardarConfigGitHub()" class="btn btn-primary">Guardar Configuraci√≥n</button>
              <button onclick="ocultarConfig()" class="btn btn-secondary">Cancelar</button>
            </div>
          </section>

          <div class="alert alert-info" style="display: none;" id="alertConfig">
            <strong>‚öôÔ∏è Configuraci√≥n Requerida:</strong> Configura tu token de GitHub para sincronizar datos.
            <button onclick="mostrarConfig()" class="btn-link">Configurar Ahora</button>
          </div>

          <div class="content">
            <section class="search-section">
              <h2>üîç B√∫squeda de Pacientes</h2>
              <div class="search-container">
                <input type="text" id="searchInput" class="search-input" placeholder="Busca por c√≥digo, nombre o apellido..." />
                <select id="tipoSearch" class="search-select">
                  <option value="todos">Todos</option>
                  <option value="codigo">C√≥digo</option>
                  <option value="nombre">Nombre</option>
                  <option value="apellido">Apellido</option>
                </select>
              </div>
              <div id="resultadosBusqueda" class="search-results"></div>
            </section>

            <div class="two-columns">
              <section class="form-section">
                <h2>‚ûï Nuevo Paciente</h2>
                <form id="formPaciente" class="form-paciente">
                  <div class="form-group">
                    <label>C√≥digo de Paciente:</label>
                    <input type="text" id="codigo" placeholder="P-001" required />
                  </div>
                  <div class="form-group">
                    <label>Nombre:</label>
                    <input type="text" id="nombre" placeholder="Juan" required />
                  </div>
                  <div class="form-group">
                    <label>Apellido:</label>
                    <input type="text" id="apellido" placeholder="P√©rez" required />
                  </div>
                  <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="email" placeholder="correo@ejemplo.com" />
                  </div>
                  <div class="form-group">
                    <label>Tel√©fono:</label>
                    <input type="tel" id="telefono" placeholder="+51 9 XXXX XXXX" />
                  </div>
                  <div class="form-group">
                    <label>Diagn√≥stico Cl√≠nico:</label>
                    <textarea id="diagnostico" placeholder="Describe el diagn√≥stico..."></textarea>
                  </div>
                  <div class="form-group">
                    <label>Tipo de Tratamiento:</label>
                    <select id="tratamiento">
                      <option>Ortodoncia Fija</option>
                      <option>Ortodoncia Removible</option>
                      <option>Profilaxis</option>
                      <option>Otro</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Estado:</label>
                    <select id="estado">
                      <option>Activo</option>
                      <option>Inactivo</option>
                      <option>Completado</option>
                    </select>
                  </div>
                  <button type="submit" class="btn btn-primary">Guardar Paciente</button>
                </form>
              </section>

              <section class="stats-section">
                <h2>üìä Estad√≠sticas</h2>
                <div class="stats-container">
                  <div class="stat-card">
                    <h3 id="totalPacientes">0</h3>
                    <p>Pacientes Totales</p>
                  </div>
                  <div class="stat-card">
                    <h3 id="pacientesActivos">0</h3>
                    <p>Pacientes Activos</p>
                  </div>
                  <div class="stat-card">
                    <h3 id="pacientesCompletados">0</h3>
                    <p>Tratamientos Completados</p>
                  </div>
                </div>
                <div class="buttons-export">
                  <button onclick="exportarJSON()" class="btn btn-secondary">üì• Exportar JSON</button>
                  <button onclick="importarJSON()" class="btn btn-secondary">üì§ Importar JSON</button>
                </div>
              </section>
            </div>

            <section class="patients-section">
              <h2>üë• Lista de Pacientes</h2>
              <div id="listaPacientes" class="patients-list">
                <p class="empty-message">No hay pacientes registrados</p>
              </div>
            </section>
          </div>
        </div>
        <input type="file" id="fileInput" style="display: none;" accept=".json" />
      </section>

      <!-- üìè Secci√≥n 2: Moyers & T&J -->
      <section id="moyers" class="tab-content">
        <div class="analysis-container">
          <div class="header-analysis">
            <h1>üìê An√°lisis de Moyers y Tanaka & Johnston ‚Äî DentiStudio</h1>
            <p>Predicci√≥n de espacio en dentici√≥n mixta ‚Äî Ortodoncia Preventiva</p>
          </div>
          <div class="content-analysis">
            <div class="card">
              <h2>Datos del An√°lisis</h2>
              <div class="form-group">
                <label>Suma de incisivos inferiores (mm):</label>
                <input type="number" id="inci_mm" step="0.1" placeholder="Ej: 24.5" min="20" />
              </div>
              <div class="form-group">
                <label>Sexo del paciente:</label>
                <select id="sexo">
                  <option value="varon">Var√≥n</option>
                  <option value="mujer">Mujer</option>
                </select>
              </div>
              <div class="form-group">
                <label>Arcada a analizar:</label>
                <select id="arcada">
                  <option>Superior</option>
                  <option>Inferior</option>
                </select>
              </div>
              <div class="form-group">
                <label>Espacio disponible en modelo (mm):</label>
                <input type="number" id="espacio_modelo" step="0.1" placeholder="Ej: 17.8" />
              </div>
              <button onclick="calcularMoyers()" class="btn btn-primary">Calcular An√°lisis</button>
              <div id="resultadosMoyers"></div>
            </div>
            <div class="card">
              <h2>Instrucciones</h2>
              <div class="instructions">
                <p><strong>1.</strong> Mide el ancho mesio-distal de los 4 incisivos inferiores (31‚Äì42).</p>
                <p><strong>2.</strong> Suma y col√≥calo arriba.</p>
                <p><strong>5.</strong> Haz clic en calcular ‚Üí obt√©n predicciones de Moyers y Tanaka & Johnston.</p>
                <hr />
                <p><strong>‚úÖ Positivo:</strong> Hay espacio suficiente</p>
                <p><strong>‚ö†Ô∏è Negativo:</strong> Api√±amiento probable</p>
              </div>
            </div>
            <div class="table-section">
              <h2>Tabla Moyers ‚Äî Percentil 75%</h2>
              <table>
                <thead><tr><th>Suma Inc. Inf.</th><th>Sup. Var√≥n</th><th>Sup. Mujer</th><th>Inf. Var√≥n</th><th>Inf. Mujer</th></tr></thead>
                <tbody>
                  <tr><td>22.0</td><td>19.2</td><td>18.0</td><td>18.7</td><td>18.0</td></tr>
                  <tr><td>23.0</td><td>20.6</td><td>19.2</td><td>19.8</td><td>19.2</td></tr>
                  <tr><td>24.0</td><td>21.8</td><td>20.4</td><td>20.9</td><td>20.4</td></tr>
                  <tr><td>24.5</td><td>22.8</td><td>21.8</td><td>22.5</td><td>22.1</td></tr>
                  <tr><td>25.0</td><td>23.3</td><td>21.5</td><td>23.0</td><td>22.3</td></tr>
                  <tr><td>25.5</td><td>24.6</td><td>22.8</td><td>24.2</td><td>23.5</td></tr>
                  <tr><td>26.0</td><td>25.4</td><td>23.8</td><td>25.0</td><td>24.4</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- ü¶∑ Secci√≥n 3: Discrepancia + Bolton -->
      <section id="discrepancia" class="tab-content">
        <div class="app-container">
          <div class="header-app">
            <h1>OrtoApp ‚Äî Discrepancia Dentaria & Bolton ‚Äî DentiStudio</h1>
            <p>C√°lculo Cl√≠nico para Dentici√≥n Permanente</p>
          </div>

          <div class="content-grid">
            <div class="card">
              <h3>Datos del Paciente</h3>
              <div class="form-group">
                <label class="form-label">Nombre del Paciente</label>
                <input type="text" class="form-input" id="patient-name" placeholder="Ingrese el nombre del paciente">
              </div>

              <div class="button-group">
                <button class="btn btn-secondary" style="background-color: var(--color-error); color: var(--color-btn-primary-text);" onclick="clearAllData()">Limpiar Todo</button>
              </div>

              <h3>Par√°metros de Entrada</h3>
              <div class="teeth-two-columns">
                <div class="teeth-column">
                  <h4 class="column-title">ARCADA SUPERIOR</h4>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">2¬™ Premolar Derecha</label>
                    <input type="number" class="form-input" id="tooth-sup-1" step="0.1" placeholder="7.0">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">1¬™ Premolar Derecha</label>
                    <input type="number" class="form-input" id="tooth-sup-2" step="0.1" placeholder="7.2">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Canino Derecho</label>
                    <input type="number" class="form-input" id="tooth-sup-3" step="0.1" placeholder="7.8">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Lateral Derecho</label>
                    <input type="number" class="form-input" id="tooth-sup-4" step="0.1" placeholder="6.5">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Central Derecho</label>
                    <input type="number" class="form-input" id="tooth-sup-5" step="0.1" placeholder="8.5">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Central Izquierdo</label>
                    <input type="number" class="form-input" id="tooth-sup-6" step="0.1" placeholder="8.5">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Lateral Izquierdo</label>
                    <input type="number" class="form-input" id="tooth-sup-7" step="0.1" placeholder="6.5">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Canino Izquierdo</label>
                    <input type="number" class="form-input" id="tooth-sup-8" step="0.1" placeholder="7.8">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">1¬™ Premolar Izquierda</label>
                    <input type="number" class="form-input" id="tooth-sup-9" step="0.1" placeholder="7.2">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">2¬™ Premolar Izquierda</label>
                    <input type="number" class="form-input" id="tooth-sup-10" step="0.1" placeholder="7.0">
                  </div>
                </div>
                <div class="teeth-column">
                  <h4 class="column-title">ARCADA INFERIOR</h4>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">2¬™ Premolar Derecha</label>
                    <input type="number" class="form-input" id="tooth-inf-1" step="0.1" placeholder="6.8">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">1¬™ Premolar Derecha</label>
                    <input type="number" class="form-input" id="tooth-inf-2" step="0.1" placeholder="7.0">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Canino Derecho</label>
                    <input type="number" class="form-input" id="tooth-inf-3" step="0.1" placeholder="6.5">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Lateral Derecho</label>
                    <input type="number" class="form-input" id="tooth-inf-4" step="0.1" placeholder="5.8">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Central Derecho</label>
                    <input type="number" class="form-input" id="tooth-inf-5" step="0.1" placeholder="5.2">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Central Izquierdo</label>
                    <input type="number" class="form-input" id="tooth-inf-6" step="0.1" placeholder="5.2">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Incisivo Lateral Izquierdo</label>
                    <input type="number" class="form-input" id="tooth-inf-7" step="0.1" placeholder="5.8">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">Canino Izquierdo</label>
                    <input type="number" class="form-input" id="tooth-inf-8" step="0.1" placeholder="6.5">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">1¬™ Premolar Izquierda</label>
                    <input type="number" class="form-input" id="tooth-inf-9" step="0.1" placeholder="7.0">
                  </div>
                  <div class="tooth-input-group">
                    <label class="form-label" style="font-size: var(--font-size-xs);">2¬™ Premolar Izquierda</label>
                    <input type="number" class="form-input" id="tooth-inf-10" step="0.1" placeholder="6.8">
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label">Espacios Disponibles (mm)</label>
                <div class="space-inputs">
                  <div>
                    <label class="form-label">Superior</label>
                    <input type="number" class="form-input" id="perm-espacio-sup" step="0.1" placeholder="Ej: 75.0">
                  </div>
                  <div>
                    <label class="form-label">Inferior</label>
                    <input type="number" class="form-input" id="perm-espacio-inf" step="0.1" placeholder="Ej: 65.0">
                  </div>
                </div>
              </div>

              <div class="bolton-section">
                <h3>An√°lisis de Bolton</h3>
                <div class="form-group">
                  <label class="form-label">6 Dientes Anteriores (suma autom√°tica)</label>
                  <div class="bolton-inputs">
                    <div><input type="number" class="form-input" id="bolton-ant-sup" readonly></div>
                    <div><input type="number" class="form-input" id="bolton-ant-inf" readonly></div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Primeras Molares</label>
                  <div class="bolton-inputs">
                    <div>
                      <label class="form-label" style="font-size:var(--font-size-xs)">Sup. Derecha</label>
                      <input type="number" class="form-input" id="bolton-mol-sup-der" step="0.1" placeholder="10.5">
                    </div>
                    <div>
                      <label class="form-label" style="font-size:var(--font-size-xs)">Sup. Izq.</label>
                      <input type="number" class="form-input" id="bolton-mol-sup-izq" step="0.1" placeholder="10.5">
                    </div>
                    <div>
                      <label class="form-label" style="font-size:var(--font-size-xs)">Inf. Derecha</label>
                      <input type="number" class="form-input" id="bolton-mol-inf-der" step="0.1" placeholder="11.0">
                    </div>
                    <div>
                      <label class="form-label" style="font-size:var(--font-size-xs)">Inf. Izq.</label>
                      <input type="number" class="form-input" id="bolton-mol-inf-izq" step="0.1" placeholder="11.0">
                    </div>
                  </div>
                </div>
              </div>

              <button class="btn btn-secondary" onclick="loadPermanentExample()">Cargar Ejemplo</button>
            </div>

            <div class="card">
              <h3>Resultados</h3>
              <div id="results-container">
                <div class="result-item">
                  <div class="result-label">Espacio Requerido Superior</div>
                  <div class="result-value" id="perm-required-sup">-- mm</div>
                </div>
                <div class="result-item">
                  <div class="result-label">Discrepancia Superior</div>
                  <div class="result-value" id="perm-discrepancy-sup">-- mm</div>
                  <div class="discrepancy-bar"><div class="discrepancy-fill" id="perm-bar-sup"></div></div>
                </div>
                <div class="result-item">
                  <div class="result-label">Espacio Requerido Inferior</div>
                  <div class="result-value" id="perm-required-inf">-- mm</div>
                </div>
                <div class="result-item">
                  <div class="result-label">Discrepancia Inferior</div>
                  <div class="result-value" id="perm-discrepancy-inf">-- mm</div>
                  <div class="discrepancy-bar"><div class="discrepancy-fill" id="perm-bar-inf"></div></div>
                </div>
                <div class="recommendation">
                  <div class="recommendation-title">Recomendaci√≥n Cl√≠nica</div>
                  <div class="recommendation-text" id="perm-recommendation">Ingrese los datos para ver la recomendaci√≥n</div>
                </div>
                <div id="bolton-results"></div>
              </div>
              <div class="button-group">
                <button class="btn btn-primary" onclick="saveResultsLocally()">Guardar Resultados</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- üí∞ Secci√≥n 4: Cat√°logo -->
      <section id="catalogo" class="tab-content">
        <div class="catalog-header">
          <h1>Gniius ‚Äî DentiStudio, Centro Integral Infantil y Familiar</h1>
          <p>Ayacucho, Huamanga</p>
          <button class="btn-edit" onclick="mostrarEdicionPrecios()">‚öôÔ∏è Editar Precios</button>
        </div>
        <div class="services-grid" id="servicesGrid"></div>
        <div class="price-management" id="priceManagement">
          <div class="price-header">
            <h2>Administrar Precios</h2>
            <div class="btn-group">
              <button class="btn btn-secondary" onclick="cancelarEdicionPrecios()">Cancelar</button>
              <button class="btn btn-primary" onclick="guardarCambiosPrecios()">Guardar Cambios</button>
            </div>
          </div>
          <div class="price-list" id="priceList"></div>
        </div>
      </section>
    </main>

    <!-- Modal com√∫n -->
    <div class="modal" id="modal">
      <div class="modal__content">
        <button class="modal__close" id="modalClose">&times;</button>
        <img class="modal__image" id="modalImage" alt="">
        <div class="modal__body">
          <h2 id="modalTitle"></h2>
          <div id="modalPrice"></div>
          <p id="modalDescription"></p>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
